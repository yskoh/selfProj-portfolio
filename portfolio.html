<html>
  <head>
    <meta charset="utf-8">
    <link rel="stylesheet" type="text/css" href="./portfolioFixed.css" />
    <title>Yesl Koh's Portfolio Site</title>
    <script src="./jquery-1.4.2.js"></script>
  </head>
  <body>
    <div id="gnb">
      <h1 id="logo" data-order="0"><a href="#">YK Logo</a></h1>
      <div id="gnbListDiv">
        <ul>
          <li class="gnbList" data-name="aboutPg" data-order="1"><a href="#aboutPg">About</a></li>
          <li class="gnbList" data-name="projectsPg" data-order="2"><a href="#projectsPg">Projects</a></li>
          <li class="gnbList" data-name="contactPg" data-order="3"><a href="#contactPg">Contacts</a></li>
        </ul>
      </div>
    </div>
    <div id="container">
      <div id="introPg">
        <div id="curtain">
          <div class="cards"></div>
          <div class="cards"></div>
          <div class="cards"></div>
          <div class="cards"></div>
          <div class="cards"></div>
          <div class="cards"></div>
          <div class="cards"></div>
          <div class="cards"></div>
          <div class="cards"></div>
          <div class="cards"></div>
          <div class="cards"></div>
          <div class="cards"></div>
          <div class="cards"></div>
          <div class="cards"></div>
          <div class="cards"></div>
          <div class="cards"></div>
          <div class="cards"></div>
          <div class="cards"></div>
          <div class="cards"></div>
          <div class="cards"></div>
          <div class="cards"></div>
          <div class="cards"></div>
          <div class="cards"></div>
          <div class="cards"></div>
          <div class="cards"></div>
          <div class="cards"></div>
          <div class="cards"></div>
          <div class="cards"></div>
          <div class="cards"></div>
          <div class="cards"></div>
          <div class="cards"></div>
          <div class="cards"></div>
          <div class="cards"></div>
          <div class="cards"></div>
          <div class="cards"></div>
          <div class="cards"></div>
          <div class="cards"></div>
          <div class="cards"></div>
          <div class="cards"></div>
          <div class="cards"></div>
          <div class="cards"></div>
          <div class="cards"></div>
          <div class="cards"></div>
          <div class="cards"></div>
          <div class="cards"></div>
          <div class="cards"></div>
          <div class="cards"></div>
          <div class="cards"></div>
          <div class="cards"></div>
          <div class="cards"></div>
          <div class="cards"></div>
          <div class="cards"></div>
          <div class="cards"></div>
          <div class="cards"></div>
          <div class="cards"></div>
          <div class="cards"></div>
          <div class="cards"></div>
          <div class="cards"></div>
          <div class="cards"></div>
          <div class="cards"></div>
          <div class="cards"></div>
          <div class="cards"></div>          
          <div class="cards"></div>
          <div class="cards"></div>
          <div class="cards"></div>
          <div class="cards"></div>
          <div class="cards"></div>
          <div class="cards"></div>          
          <div class="cards"></div>
          <div class="cards"></div>
          <div class="cards"></div>
          <div class="cards"></div>
          <div class="cards"></div>
          <div class="cards"></div>          
          <div class="cards"></div>
          <div class="cards"></div>
          <div class="cards"></div>
          <div class="cards"></div>
          <div class="cards"></div>
          <div class="cards"></div>
          <div class="cards"></div>
          <div class="cards"></div>
          <div class="cards"></div>
          <div class="cards"></div>
          <div class="cards"></div>
          <div class="cards"></div>
          <div class="cards"></div>
          <div class="cards"></div>
          <div class="cards"></div>
          <div class="cards"></div>
          <div class="cards"></div>
          <div class="cards"></div>
          <div class="cards"></div>
          <div class="cards"></div>
          <div class="cards"></div>
          <div class="cards"></div>
          <div class="cards"></div>
          <div class="cards"></div>          
          <div class="cards"></div>
          <div class="cards"></div>
          <div class="cards"></div>
          <div class="cards"></div>
          <div class="cards"></div>
          <div class="cards"></div>          
          <div class="cards"></div>
          <div class="cards"></div>
          <div class="cards"></div>
          <div class="cards"></div>
          <div class="cards"></div>
          <div class="cards"></div>          
          <div class="cards"></div>
          <div class="cards"></div>
          <div class="cards"></div>
          <div class="cards"></div>
          <div class="cards"></div>
          <div class="cards"></div>          
          <div class="cards"></div>
          <div class="cards"></div>
          <div class="cards"></div>
          <div class="cards"></div>
          <div class="cards"></div>
          <div class="cards"></div>          
          <div class="cards"></div>
          <div class="cards"></div>
          <div class="cards"></div>
          <div class="cards"></div>
          <div class="cards"></div>
          <div class="cards"></div>          
          <div class="cards"></div>
          <div class="cards"></div>
          <div class="cards"></div>
          <div class="cards"></div>
          <div class="cards"></div>
          <div class="cards"></div>          
          <div class="cards"></div>
          <div class="cards"></div>
          <div class="cards"></div>
          <div class="cards"></div>
          <div class="cards"></div>
          <div class="cards"></div>
          <div class="cards"></div>
          <div class="cards"></div>
          <div class="cards"></div>
          <div class="cards"></div>
          <div class="cards"></div>
          <div class="cards"></div>
          <div class="cards"></div>
          <div class="cards"></div>
          <div class="cards"></div>
          <div class="cards"></div>
          <div class="cards"></div>
          <div class="cards"></div>
          <div class="cards"></div>
          <div class="cards"></div>
          <div class="cards"></div>
          <div class="cards"></div>
          <div class="cards"></div>
          <div class="cards"></div>
          <div class="cards"></div>
          <div class="cards"></div>          
          <div class="cards"></div>
          <div class="cards"></div>
          <div class="cards"></div>
          <div class="cards"></div>
          <div class="cards"></div>
          <div class="cards"></div>          
          <div class="cards"></div>
          <div class="cards"></div>
          <div class="cards"></div>
          <div class="cards"></div>
          <div class="cards"></div>
          <div class="cards"></div>          
          <div class="cards"></div>
          <div class="cards"></div>
          <div class="cards"></div>
          <div class="cards"></div>
          <div class="cards"></div>
          <div class="cards"></div>          
          <div class="cards"></div>
          <div class="cards"></div>
          <div class="cards"></div>
          <div class="cards"></div>
          <div class="cards"></div>
          <div class="cards"></div>          
          <div class="cards"></div>
          <div class="cards"></div>
          <div class="cards"></div>
          <div class="cards"></div>
          <div class="cards"></div>
          <div class="cards"></div>          
          <div class="cards"></div>
          <div class="cards"></div>
          <div class="cards"></div>
          <div class="cards"></div>
          <div class="cards"></div>
          <div class="cards"></div>          
          <div class="cards"></div>
          <div class="cards"></div>
          <div class="cards"></div>
          <div class="cards"></div>
          <div class="cards"></div>
          <div class="cards"></div>         
          <div class="cards"></div>
          <div class="cards"></div>
          <div class="cards"></div>
          <div class="cards"></div>
          <div class="cards"></div>
          <div class="cards"></div>
          <div class="cards"></div>
          <div class="cards"></div>
          <div class="cards"></div>
          <div class="cards"></div>
          <div class="cards"></div>
          <div class="cards"></div>
          <div class="cards"></div>
          <div class="cards"></div>
          <div class="cards"></div>
          <div class="cards"></div>
          <div class="cards"></div>
          <div class="cards"></div>
          <div class="cards"></div>
          <div class="cards"></div>
          <div class="cards"></div>
          <div class="cards"></div>
          <div class="cards"></div>
          <div class="cards"></div>
          <div class="cards"></div>
          <div class="cards"></div>
          <div class="cards"></div>
          <div class="cards"></div>          
          <div class="cards"></div>
          <div class="cards"></div>
          <div class="cards"></div>
          <div class="cards"></div>
          <div class="cards"></div>
          <div class="cards"></div>          
          <div class="cards"></div>
          <div class="cards"></div>
          <div class="cards"></div>
          <div class="cards"></div>
          <div class="cards"></div>
          <div class="cards"></div>          
          <div class="cards"></div>
          <div class="cards"></div>
          <div class="cards"></div>
          <div class="cards"></div>
          <div class="cards"></div>
          <div class="cards"></div>          
          <div class="cards"></div>
          <div class="cards"></div>
          <div class="cards"></div>
          <div class="cards"></div>
          <div class="cards"></div>
          <div class="cards"></div>          
          <div class="cards"></div>
          <div class="cards"></div>
          <div class="cards"></div>
          <div class="cards"></div>
          <div class="cards"></div>
          <div class="cards"></div>          
          <div class="cards"></div>
          <div class="cards"></div>
          <div class="cards"></div>
          <div class="cards"></div>
          <div class="cards"></div>
          <div class="cards"></div>          
          <div class="cards"></div>
          <div class="cards"></div>
          <div class="cards"></div>
          <div class="cards"></div>
          <div class="cards"></div>
          <div class="cards"></div>         
          <div class="cards"></div>
          <div class="cards"></div>
          <div class="cards"></div>
          <div class="cards"></div>
          <div class="cards"></div>
          <div class="cards"></div>    
          <div class="cards"></div>          
          <div class="cards"></div>
          <div class="cards"></div>
          <div class="cards"></div>
          <div class="cards"></div>
          <div class="cards"></div>
          <div class="cards"></div>          
          <div class="cards"></div>
          <div class="cards"></div>
          <div class="cards"></div>
          <div class="cards"></div>
          <div class="cards"></div>
          <div class="cards"></div>          
          <div class="cards"></div>
          <div class="cards"></div>
          <div class="cards"></div>
          <div class="cards"></div>
          <div class="cards"></div>
          <div class="cards"></div>         
          <div class="cards"></div>
          <div class="cards"></div>
          <div class="cards"></div>
          <div class="cards"></div>
          <div class="cards"></div>
        </div>
      </div>
      <div id="aboutPg">
        <div id="aboutPanel"></div>
        <div id="aboutBox">
          <div id="texts">
<!--
            연속되는 같은 클래스 이름이 왜 필요할까? #text p 랑 다른걸까?
            여러줄에 택스트를 꼭 각각의 테그로 처리해야할까?
-->
            <p class="txtLines">안녕하세요!</p>
            <p class="txtLines">위메프 스크립트 팀의 <b>고예슬</b>입니다. </p>
            <p class="txtLines">저는 <em>심리학</em> 전공을 한 후, </p>
            <p class="txtLines">NHN NEXT에 진학하여 <em>frontend</em> 분야를 접하게 됐어요</p>
            <p class="txtLines">만나서 반가워요</p>
            <p class="txtLines">좋은 하루 되세용~~</p>
            <p class="txtLines">Hi There!</p>
            <p class="txtLines">Thanks for visiting my page.</p>
            <p class="txtLines">My contact info is written below.</p>
            <p class="txtLines">Please contact me. I hope to keep in touch!</p>
          </div>
        </div>
        <a id="download" href="#"><span class="colorCover"><span id="resumeTxt">Resume Download</span></span>Resume</a>
      </div>
      <div id="projectsPg">
        <div id="projectPanel"></div>
        <ul id="circles" class="centered">
          <li class="projCircle"><p class="projs">eatSlow</p></li>
          <li class="projCircle"><p class="projs">newsfeed</p></li>
          <li class="projCircle"><p class="projs">blackandwhite2</p></li>
          <li class="projCircle"><p class="projs">wpi</p></li>
          <li class="projCircle"><p class="projs">Ppodo</p></li>
          <li class="projCircle"><p class="projs">StickHero</p></li>
        </ul>
        <div class="projModal"><a href="" class="cancelBtn"><img id="xBtn" src="./cancelButton.png" alt=""></a></div>        
      </div>
      <div id="contactPg">
        <div id="contactPanel"></div>
        <div id="contactInfo" >contact info
          <div id="contItems">
            <div id="contName" class="centered">name</div>
            <div id="contEmail">email</div>
            <div id="contNo">phone number</div>
          </div>
        </div>
      </div>
    </div>
    <script>
      
$(document).ready(function () {
  //스크립트는 기능별로 파일로 분리하거나 객체로 묶는게 보기 좋을듯?

  //전역변수들인데. 변수숫자를 줄이기 위해서 객체로 묶으면 어떨까?
  // var element = { introPg : $('#introPg') } 식으로 
  var introPg = $('#introPg');
  var destination = 0; 
  var downloadBtn = $('#download');
  var container = $('#container');
  var circles = $('.projCircle');
  var gnbMenu = $('.gnbList');
  var logo = $('#logo');
  var body = $('body');
  
  var scrollIdx = 0;
  var curScrollTop = 0;
  var prevScrollTop = 0;
  
  var presentScrollTop = 0;
  
  //서버가 따로 없으므로 data는 js 객체로 하는게 어떨까?
  //텍스트 정보도 js 객체가 관리하는게 좋을꺼 같기도..
  var data = {
    img : ["a.png", "b.png"],
  
  }
  //scroll이벤트는 관리가 어려우므로, one으로 관리해서 콜백으로 다시 바인딩 하는 식은 어떨까?
  //e.originalEvent.wheelDelta 값을 활용해보자
  var a = function() {
    $('body').one('mousewheel', function(e){
      if(e.originalEvent.wheelDelta < 0) {
       //scroll down
       console.log('Down');
        $("#introPg").css({"top":"-1000px"});
        $("#aboutPg").css({"top":"px"});
        this.presentScrollTop = this.presentScrollTop - 1000;
      }else {
       //scroll up
       console.log('Up');
      }

      //prevent page fom scrolling
      return false;
    });
    
  }
  
  //개발할 기능을 세부단위로 나누어 개발하고 개발이 되면 바로바로 모듈화 시키거나 객체로 묶고 정리하는건 어떨까? 

//   $(window).bind('scroll', function (e) {
//     
//     console.log("hihi");
//
//     curScrollTop = $(this).scrollTop();
//     // check scroll direction
//     console.log(curScrollTop);
//     if (curScrollTop >= prevScrollTop) {
//       if (curScrollTop > 200 && curScrollTop < 500) {
//         body.animate({scrollTop: 900}, 500);
//       }
//       if (curScrollTop > 900 && curScrollTop < 1100) {
//         body.animate({scrollTop: 1800}, 500);
//       }
//       if (curScrollTop > 1800) {
//         body.animate({scrollTop: 2700}, 500);
//       }
//       else {
//         return;
//       }
//       // if (curScrollTop > 400 && curScrollTop < 800) {
//       //   body.animate({scrollTop: 900}, 500);
//       // }
//       // destination = curScrollTop + 900;
//       // console.log(destination);
//       // var page = destination/ 900;
//       // if(page === 1) {
//       //   destination = 900;
//       // } else if (page ===2) {
//       //   destination = 1800;
//       // } else if (page === 3) {
//       //   destination = 2700;
//       // } else if (page === 0) {
//       //   destination = 0;
//       // }
//     } else {
//       console.log('up up', scrollIdx);
//       if (curScrollTop > 900 && curScrollTop < 1800) {
//         body.animate({scrollTop: 900}, 500);
//       }
//       if (curScrollTop > 1800 && curScrollTop < 2700) {
//         body.animate({scrollTop: 1800}, 500);
//       }
//       if (curScrollTop > 2700) {
//         body.animate({scrollTop: 2700}, 500);
//       }
//       else {
//         return;
//       }
//     }
//
//     // go to idx == data-order value인 곳으로
//     prevScrollTop = curScrollTop;
//
//   });

  // 이벤트 바인드는 분리하고, 각 함수는 내부에서 부르지말고 별도 함수로 빼두어 정리하는게 어떨까?
  introPg.bind('click mousemove', function(e) {
    if (e.type === 'click') {
      scroll(900, slideDownAndUp($('#aboutPanel'), $('#aboutBox')));
    } else if (e.type === 'mousemove') {
      $(this).css('cursor', 'pointer');
    }

  });

  //검정색 카드 부분
  //jquery animation등이 처리되는 방식에 대해서 찾아보면 좋을듯 
  $('.cards').bind('mouseenter', function (e) {
    $(this).fadeOut().fadeIn();
  });

  downloadBtn.bind('mouseenter mouseleave', function (e) {
    var self = $(this);
    if (e.type === 'mouseenter') {
      fillColor();
    } else if (e.type === 'mouseleave') {
      $('#download .colorCover').animate({width:0}, 200, function (){ 
        $('#resumeTxt').css('display', 'none');
        $('#download .colorCover').clearQueue();
      });
    }

  });

  logo.bind('click mouseenter', function (e) {
    if (e.type === 'click') {
      body.animate({scrollTop: 0}, 500);
    } else if (e.type === 'mouseenter') {
      console.log('entered');
      liftLogo();
    }
  });

  gnbMenu.bind('mouseenter mouseleave click', function (e) {
    var self = $(this);

    if (e.type === 'mouseenter') {
      self.css('color', '#FCD68A');
    } else if (e.type === 'mouseleave') {
      self.css('color', 'black');
    } else if (e.type === 'click') {
      e.preventDefault();
      var id = $(this).find('a').attr('href');
      var topVal = 0;
      var nextAniFunc;
      if (id === '#aboutPg') {
        // scrollAbout(id); 
        topVal = 900;
        nextAniFunc = slideDownAndUp($('#aboutPanel') , $('#aboutBox'));
      }

      if (id === '#projectsPg') {
        // scrollProj(id);
        topVal = 1800;
        nextAniFunc = showCircle;
      }

      if (id === '#contactPg') {
        // scrollCont(id);
        topVal = 2700;
        nextAniFunc = slideDownAndUpContact($('#contactPanel'), $('#contactInfo'));
      }

      scroll(topVal, nextAniFunc);
    }
  });

  circles.bind('click', function () {
    var self = $(this).index();
    //해당 index가져오고
    console.log(self);
    $('.projModal').css('display','block');
  });

  function scroll(topVal, nextAniFunc) {
    body.animate({scrollTop: topVal}, 500, nextAniFunc);
  }

  // function scrollAbout(elemIdStr) {
  //   body.animate({scrollTop: 900}, 500, slideDownAndUp($('#aboutPanel') , $('#aboutBox')));
  // }

  // function scrollProj(elemIdStr) {
  //   //이것의 기준이 맨 위가 아니므로, 문제가 됨. 
  //   destination = $(elemIdStr).offset().top;
  //   body.animate({scrollTop: 1800}, 500, showCircle);
  // }

  // function scrollCont(elemIdStr) {
  //   //이것의 기준이 맨 위가 아니므로, 문제가 됨. 
  //   destination = $(elemIdStr).offset().top;
  //   body.animate({scrollTop: 2700}, 500, slideDownAndUp($('#contactPanel'), $('#contactInfo')));
  // }

  $('#xBtn').bind('click', function (e) {
    $('.projModal').css('display','none');
    e.preventDefault();
  });

  //dim영역 눌려도 닫히게?


  function slideDownAndUp(panel, boxToShow) {
    panel.slideDown(2000);
    boxToShow.animate({top: 100}, 2000, moveLines); 
  }

  function slideDownAndUpContact(panel, boxToShow) {
    panel.slideDown(2000);
    boxToShow.animate({top: 150}, 2000); 
  }

  function moveLines() {
    var lines = $('#texts').find('p');
    var idx = 0;

    var id = setInterval(showLine, 500);
    function showLine() {
      if( idx === lines.length) {
        clearInterval(id);
      } else {
        lines.eq(idx).fadeIn();
        idx++;
      }
    }

    showBtn();
  }
  
  //함수는 전역에 두지말고 객체로 묶어서 필요한 객체 내부에 필요한 함수를 가지게 하면 좋을듯?

  function showBtn() {
    downloadBtn.animate({top: 750}, 7500, shakeBtn);
  }

  function shakeBtn() {
    var idx = 0;

    var id = setInterval(shake, 200);
    function shake() {
      if (idx === 3) {
        clearInterval(id);
      } else {
        downloadBtn.animate({marginLeft: -5}, 100, function () {downloadBtn.animate({marginLeft: 5}, 100);});
        idx++;
      }
    }
  }

  function liftLogo() {
    var idx = 0;

    var id = setInterval(lift, 200);     
    function lift() {       
      if (idx === 2) {
        clearInterval(id);
      } else {
        logo.animate({marginTop: -5}, 100, function () {logo.animate({marginTop: 5}, 100);});         
        idx++;       
      }     
    }
  }

  function fillColor() {
    $('#download .colorCover').animate({width:100}, 200, function () {$('#resumeTxt').css('display', 'block');});
  }

  function showCircle() {
    $('#projectPanel').slideDown(500);
    
    var idx = 0;

    var id = setInterval(showCir, 300);
    function showCir() {
      if( idx === circles.length) {
        clearInterval(id);
      } else {
        circles.eq(idx).fadeIn();
        idx++;
      }
    }
  }

});
    </script>
  </body>
</html>